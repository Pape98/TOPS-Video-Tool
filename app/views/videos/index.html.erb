<%= stylesheet_link_tag '/stylesheets/videos' %>
</head>
<body>
<%=render 'header' %>

<h2 class="ui center aligned icon header">
  <i class="edit outline circular icon"></i>
  <div class="content">
    Videos Summary
    <div class="sub header">This page contains information about videos and it is constantly updated</div>
  </div>
</h2>

<div class="ui center aligned text container">
  <h3>Number of videos: <%=@videos.count %></h3>
</div>

<div class="ui center aligned container" style="margin-top: 30px">
  <a href="/videos"><button class="ui big primary button">View All</button></a>
</div>


<% if (@selectedVideo) %>
<div class="ui container" style="margin-top:4vh;" id="selectedVideo">
<div class="ui segment" style="background:#D6D3C4 "><h3 class="ui centered header">Selected Video</h3></div>
 <table class="ui  small center aligned celled  table" style="background: #fafafb">
        <tr>
          <td><%= @selectedVideo.topic %> </td>
          <td><%= @selectedVideo.presenter %> </td>
          <td>
          <% if @selectedVideo.segments != nil %>
                <% keywords = []%>
                  <% @selectedVideo.segments.each do |segment| %>
                      <% keywords = keywords.concat(segment[:keywords].to_a) %>
                  <% end %>
                  <% keywords.uniq.each do |keyword| %>
                    <span class="item">
                      <span class="ui grey tiny label" style="margin-top: 10px !important;"> <%=keyword %>
                      </span>
                    </span>
                <% end %>
              <% end %>
          
          </td>
          <td><%= @selectedVideo.courses %> </td>
        </tr>
    </table>
</div>

<%end %>






<div class="ui fluid container" style="padding: 0 5vw !important">
  <table class="ui very compact small center aligned celled striped table">
    <thead>
    </thead>
    <tbody>
    <tr class="beige-bg">
      <td>Number of matches</td>
      <td>Topic</td>
      <td>Link</td>
      <td>Presenter</td>
      <td>Keywords</td>
      <td>Courses</td>
      <td>Status</td>
      <td></td>
       <td></td>
    </tr>
    <%@videos.each do |video|  %>
    <tr>
    <td>
    <%= video.matches %>
    
    </td>
      <td class="edit" data-title="Last Edited By:" data-content="<%=video.lastEdit%>"><%=video.topic%></td>
      <td><a href="<%=video.link%>"><%=video.link%></a></td>
      <td><%=video.presenter%></td>
      <td>
        <% if video.segments != nil %>
          <% keywords = []%>
            <% video.segments.each do |segment| %>
                <% keywords = keywords.concat(segment[:keywords].to_a) %>
            <% end %>
            <% keywords.uniq.each do |keyword| %>
              <span class="item">
                <span class="ui grey tiny label" style="margin-top: 10px !important;"> <%=keyword %>
                </span>
              </span>
          <% end %>
        <% end %>

      </td>
      <td>

        <% video.courses.each do |course| %>
          <%case course %>
        <%when "140" %>
              <span class="item">
          <span class="ui teal tiny label" style="margin-top: 10px" >
            <%=course%>
          </span>
              </span>
          <%when "141" %>
              <span class="item">
          <span class="ui black tiny label" style="margin-top: 10px" >
            <%=course%>
          </span>
              </span>
          <%when "142" %>
              <span class="item">
            <span class="ui yellow tiny label" style="margin-top: 10px">
              <%=course%>
            </span>
              </span>
          <%when "147" %>
              <span class="item">
          <span class="ui grey tiny label" style="margin-top: 10px" >
            <%=course%>
          </span>
              </span>
          <%when "148" %>
              <span class="item">
          <span class="ui purple tiny label" style="margin-top: 10px" >
            <%=course%>
          </span>
              </span>
          <%when "150" %>
              <span class="item">
            <span class="ui olive tiny label" style="margin-top: 10px">
              <%=course%>
            </span>
              </span>
          <%when "151" %>
              <span class="item">
            <span class="ui pink tiny label" style="margin-top: 10px">
              <%=course%>
            </span>
              </span>
          <%when "152" %>
              <span class="item">
            <span class="ui orange tiny label" style="margin-top: 10px">
              <%=course%>
            </span>
              </span>
          <%when "166" %>
              <span class="item">
          <span class="ui green tiny label" style="margin-top: 10px" >
            <%=course%>
          </span>
              </span>
          <%when "167" %>
              <span class="item">
          <span class="ui blue tiny label" style="margin-top: 10px" >
            <%=course%>
          </span>
              </span>
          <%when "171" %>
              <span class="item">
          <span class="ui olive tiny label" style="margin-top: 10px" >
            <%=course%>
          </span>
              </span>
          <%when "172" %>
              <span class="item">
          <span class="ui orange tiny label" style="margin-top: 10px" >
            <%=course%>
          </span>
              </span>
          <%when "251" %>
              <span class="item">
            <span class="ui teal tiny label" style="margin-top: 10px">
              <%=course%>
            </span>
              </span>
          <%when "304" %>
              <span class="item">
            <span class="ui brown tiny label" style="margin-top: 10px">
              <%=course%>
            </span>
              </span>
          <%when "308" %>
              <span class="item">
            <span class="ui violet tiny label" style="margin-top: 10px">
              <%=course%>
            </span>
              </span>
          <%when "365" %>
              <span class="item">
          <span class="ui pink tiny label" style="margin-top: 10px" >
            <%=course%>
          </span>
              </span>
          <%when "366" %>
              <span class="item">
          <span class="ui blue tiny label" style="margin-top: 10px" >
            <%=course%>
          </span>
              </span>
        <% end end  %>

      </td>
    <td>
      <% video.rubrics.each do |rubric|%>
        <% case rubric.overall %>
        <% when 'Used as is' %>
          <div style= "margin-top: 10px" class="ui green label"><%=rubric.overall %></div>
        <% when 'Used with revision' %>
          <div style= "margin-top: 10px" class="ui yellow label"><%=rubric.overall %></div>
        <% when 'Not used' %>
          <div style= "margin-top: 10px" class="ui red label"><%=rubric.overall %></div>
      <% end end %>
    </td>
    <td>
      <div class="ui link list">
      <a href="/videos/<%=video.id%>" class="item">View</a>
      <a href="/videos/<%=video.id%>/edit" class="item">Edit</a>
      <a data-confirm="Are you sure?" rel="nofollow" data-method="delete" href="/videos/<%=video.id%>"class="item" style="color:red">Delete</a>
      </div>
    </td>
     <td><a href="/videos/<%=video.id%>/related">Related Videos</a></td>
    </tr>
    <%end %>
    </tbody>
  </table>
</div>

<%=render 'footer' %>
